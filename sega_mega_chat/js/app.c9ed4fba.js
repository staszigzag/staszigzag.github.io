(function(t){function e(e){for(var r,i,c=e[0],s=e[1],u=e[2],m=0,d=[];m<c.length;m++)i=c[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2243:function(t,e,n){"use strict";var r=n("bc04"),a=n.n(r);a.a},"262d":function(t,e,n){"use strict";var r=n("4db4"),a=n.n(r);a.a},"4db4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getConfig",(function(){return ve})),n.d(r,"getRooms",(function(){return _e})),n.d(r,"getHistory",(function(){return be}));var a={};n.r(a),n.d(a,"getSocket",(function(){return Ee}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("transition",{attrs:{appear:"",mode:"out-in",name:"opacity-fade"}},[t.loading?n("v-progress-linear",{attrs:{indeterminate:"",height:"12",color:"primary"}}):n("router-view")],1),n("nane-notifications"),n("nane-bottom-sheet")],1)},c=[],s=(n("b0c0"),n("96cf"),n("1da1")),u=n("5530"),l=n("2f62"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition-group",{attrs:{appear:"",mode:"out-in",name:"slide-fade"}},t._l(t.notifications,(function(e,r){return n("v-snackbar",{key:e.id,style:{top:t.widthSnackbar*r+"px"},attrs:{top:"",right:"",color:e.color,timeout:6e4,value:e},scopedSlots:t._u([{key:"action",fn:function(){return[n("v-btn",{attrs:{text:""},on:{click:function(n){return t.DELETE_NOTIFICATION(e)}}},[t._v(" Закрыть ")])]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.text)+" ")])})),1)],1)},d=[],f={name:"NaneNotifications",data:function(){return{widthSnackbar:55}},computed:Object(u["a"])({},Object(l["d"])("notifications",["notifications"])),methods:Object(u["a"])({},Object(l["c"])("notifications",["DELETE_NOTIFICATION"]))},p=f,h=(n("262d"),n("2877")),v=n("6544"),O=n.n(v),_=n("8336"),g=n("2db4"),b=Object(h["a"])(p,m,d,!1,null,"bcf20030",null),R=b.exports;O()(b,{VBtn:_["a"],VSnackbar:g["a"]});var x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-bottom-sheet",{attrs:{value:!!t.userAction,persistent:"",inset:""}},[n("v-sheet",{staticClass:"text-center py-8"},[t.userAction?n("p",{staticClass:"text-h6"},[t._v(t._s(t.userAction.text))]):t._e(),n("v-btn",{staticClass:"mx-2",attrs:{width:"120px",color:"secondary"},on:{click:function(e){return t.handlerClickConfirm(!0)}}},[t._v("да")]),n("v-btn",{staticClass:"mx-2",attrs:{width:"120px",outlined:"",color:"error"},on:{click:function(e){return t.handlerClickConfirm(!1)}}},[t._v("нет")])],1)],1)},E=[],S={name:"NaneBottomSheet",data:function(){return{}},computed:Object(u["a"])({},Object(l["d"])("notifications",["userAction"])),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("notifications",["resolveConfirmUserAction"])),{},{handlerClickConfirm:function(t){this.resolveConfirmUserAction(t)}})},w=S,C=n("288c"),k=n("8dd9"),y=Object(h["a"])(w,x,E,!1,null,"4a8f66be",null),j=y.exports;O()(y,{VBottomSheet:C["a"],VBtn:_["a"],VSheet:k["a"]});var A={name:"App",data:function(){return{loading:!0}},components:{NaneNotifications:R,NaneBottomSheet:j},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["b"])("rooms",["getRooms"])),Object(l["b"])("settings",["getSettings"])),Object(l["b"])("auth",["checkAuth","login"])),created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getSettings();case 3:return e.next=5,t.getRooms();case 5:return e.next=7,t.checkAuth();case 7:n=e.sent,n?t.login(n):(r="login",t.$route.name!==r&&t.$router.push({name:r}));case 9:return e.prev=9,t.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,,9,12]])})))()}},T=A,N=(n("2243"),n("7496")),V=n("8e36"),L=Object(h["a"])(T,i,c,!1,null,"34be9017",null),M=L.exports;O()(L,{VApp:N["a"],VProgressLinear:V["a"]});var I=n("8c4f"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("main-header"),n("main-sidebar"),n("main-drawer"),n("main-chat"),n("main-modal-creat-room")],1)},U=[],D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nane-modal",{attrs:{value:t.isShowCreateRoom},on:{cancel:function(e){return t.TOGGLE_SHOW_CREATE_ROOM(!1)}}},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Имя нового чата")]),n("v-spacer")],1),n("v-card-text",{staticClass:"pt-5"},[n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{counter:t.settings.maxRoomTitleLength,rules:[t.rules.required,t.rules.onlyString,t.rules.maxLength],clearable:"",autocomplete:"off","prepend-icon":"mdi-comment-processing-outline",type:"text"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handlerClickCreate(e))}},model:{value:t.nameRoom,callback:function(e){t.nameRoom="string"===typeof e?e.trim():e},expression:"nameRoom"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{width:"120px",color:"secondary"},on:{click:t.handlerClickCreate}},[t._v("Создать")]),n("v-btn",{attrs:{width:"120px",outlined:"",color:"error"},on:{click:t.handlerClickClose}},[t._v("Закрыть")])],1)],1)},G=[],B=(n("498a"),function(t){return!!t&&!!t.trim()||"Это поле обязательно"}),$=function(t){return"string"===typeof t||"Это поле только для строк"},H=function(t){return function(e){return!!e&&e.length<=t||"Максимальное количество символов "+t}},W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":800},on:{"click:outside":t.handlerClickCancel,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handlerClickCancel(e)}}},[n("v-card",{staticClass:"elevation-12"},[t._t("default")],2)],1)},F=[],q={name:"NaneModal",data:function(){return{}},props:{value:{type:Boolean,default:!1}},methods:{handlerClickCancel:function(){this.$emit("cancel")}}},J=q,Y=n("b0af"),K=n("169a"),z=Object(h["a"])(J,W,F,!1,null,"5d8fd403",null),Q=z.exports;O()(z,{VCard:Y["a"],VDialog:K["a"]});var X={name:"MainModalCreateRoom",data:function(){return{nameRoom:"",valid:!1,rules:{}}},components:{NaneModal:Q},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("settings",["settings"])),Object(l["d"])("modals",["isShowCreateRoom"])),created:function(){this.initRules()},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])("modals",["TOGGLE_SHOW_CREATE_ROOM"])),Object(l["b"])("rooms",["createRoom"])),{},{handlerClickCreate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.form.validate(),t.valid){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.createRoom(t.nameRoom);case 6:return e.prev=6,t.handlerClickClose(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))()},handlerClickClose:function(){this.nameRoom="",this.TOGGLE_SHOW_CREATE_ROOM(!1)},initRules:function(){this.rules.required=B,this.rules.onlyString=$,this.rules.maxLength=H(this.settings.maxRoomTitleLength)}})},Z=X,tt=n("99d9"),et=n("4bd4"),nt=n("2fa4"),rt=n("8654"),at=n("71d9"),ot=n("2a7f"),it=Object(h["a"])(Z,D,G,!1,null,"422773b6",null),ct=it.exports;O()(it,{VBtn:_["a"],VCardActions:tt["a"],VCardText:tt["b"],VForm:et["a"],VSpacer:nt["a"],VTextField:rt["a"],VToolbar:at["a"],VToolbarTitle:ot["a"]});var st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",fixed:"","clipped-left":"",color:"primary",dark:""}},[n("v-toolbar-title",[t._v("Сега Мега Ай-нане чат !!")]),n("v-spacer"),n("v-icon",{staticClass:"mr-2"},[t._v("mdi-comment-account-outline")]),n("v-toolbar-title",{staticClass:"font-weight-bold text-h5 text-uppercase "},[t._v(" "+t._s(t.userName)+" ")]),n("v-spacer"),n("v-btn",{staticClass:"ma-2",attrs:{outlined:"",dark:""},on:{click:t.handlerClickLogout}},[t._v(" выход "),n("v-icon",{attrs:{right:""}},[t._v("mdi-exit-to-app")])],1)],1)},ut=[],lt={name:"MainHeader",data:function(){return{}},computed:Object(u["a"])({},Object(l["d"])("auth",["userName"])),methods:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["b"])("auth",["logout"])),Object(l["b"])("socket",["disconnectSocket"])),Object(l["c"])("rooms",["RESET_ROOMS"])),Object(l["b"])("notifications",["confirmUserAction"])),{},{handlerClickLogout:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.confirmUserAction();case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,t.logout();case 8:return e.next=10,t.disconnectSocket();case 10:t.RESET_ROOMS();case 11:return e.prev=11,t.$router.push({name:"login"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[5,,11,14]])})))()}})},mt=lt,dt=n("40dc"),ft=n("132d"),pt=Object(h["a"])(mt,st,ut,!1,null,"fa632524",null),ht=pt.exports;O()(pt,{VAppBar:dt["a"],VBtn:_["a"],VIcon:ft["a"],VSpacer:nt["a"],VToolbarTitle:ot["a"]});var vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{width:"400px",value:t.isShowDrawer,fixed:"",temporary:""},on:{input:function(e){return t.TOGGLE_SHOW_DRAWER(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("v-list-item",{staticClass:"text-center mt-2"},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"text-uppercase font-weight-medium"},[t._v("Список чатов")])],1)],1),n("v-divider")]},proxy:!0}])},[n("v-list",{attrs:{inlist:"",subheader:"","three-line":""}},[t._l(t.rooms,(function(e,r){return[n("v-list-item",{key:r,class:{"grey lighten-2":e.isActive},on:{click:function(n){return n.stopPropagation(),t.handlerClickRoom(e)}}},[n("v-list-item-content",{},[n("v-list-item-title",[t._v(" "+t._s(e.name)+" ")]),e.lastMessage?n("v-list-item-subtitle",{staticClass:"caption"},[t._v(" «"+t._s(e.lastMessage.text)+"» ")]):t._e()],1),n("v-list-item-icon",{staticClass:"pt-4"},[e.isActive?n("v-icon",{attrs:{color:"primary "}},[t._v("star")]):t._e()],1)],1),n("v-divider",{key:r+"x"})]}))],2)],1)},Ot=[],_t={name:"MainDrawer",data:function(){return{}},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("modals",["isShowDrawer"])),Object(l["d"])("rooms",["rooms"])),methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])("modals",["TOGGLE_SHOW_DRAWER"])),Object(l["b"])("rooms",["initActiveRoom"])),{},{handlerClickRoom:function(t){this.TOGGLE_SHOW_DRAWER(!1),t.isActive||this.initActiveRoom(t)}})},gt=_t,bt=n("ce7e"),Rt=n("8860"),xt=n("da13"),Et=n("5d23"),St=n("34c3"),wt=n("f774"),Ct=Object(h["a"])(gt,vt,Ot,!1,null,"64952d2a",null),kt=Ct.exports;O()(Ct,{VDivider:bt["a"],VIcon:ft["a"],VList:Rt["a"],VListItem:xt["a"],VListItemContent:Et["a"],VListItemIcon:St["a"],VListItemSubtitle:Et["b"],VListItemTitle:Et["c"],VNavigationDrawer:wt["a"]});var yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{width:t.$vuetify.breakpoint.xs?150:270,clipped:"",permanent:"","disable-resize-watcher":"",app:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.TOGGLE_SHOW_DRAWER(!0)}}},[n("v-list-item-content",[n("v-list-item-title",[t._v("Выбрать чат")])],1),n("v-list-item-action",[n("v-icon",[t._v("mdi-comment-multiple-outline")])],1)],1),n("v-list-item",{on:{click:function(e){return e.stopPropagation(),t.TOGGLE_SHOW_CREATE_ROOM(!0)}}},[n("v-list-item-content",[n("v-list-item-title",[t._v("Создать чат")])],1),n("v-list-item-action",[n("v-icon",[t._v("mdi-comment-plus-outline")])],1)],1),n("v-divider")]},proxy:!0}])},[n("v-list",{attrs:{dense:""}},t._l(t.activeRooms,(function(e,r){return n("v-list-item",{key:r,class:{secondary:e.isCurrent},on:{click:function(n){return n.stopPropagation(),t.handlerClickRoom(e)}}},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.name))])],1),n("v-list-item-action",[e.isCurrent?n("v-icon",[t._v("mdi-comment-check-outline")]):t._e()],1)],1)})),1)],1)},jt=[],At={name:"MainSidebar",data:function(){return{}},computed:Object(u["a"])({},Object(l["d"])("rooms",["activeRooms"])),methods:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])("modals",["TOGGLE_SHOW_DRAWER"])),Object(l["c"])("modals",["TOGGLE_SHOW_CREATE_ROOM"])),Object(l["c"])("rooms",["SET_CURRENT_ROOM"])),{},{handlerClickRoom:function(t){this.SET_CURRENT_ROOM(t)}})},Tt=At,Nt=n("1800"),Vt=Object(h["a"])(Tt,yt,jt,!1,null,"5ac214ce",null),Lt=Vt.exports;O()(Vt,{VDivider:bt["a"],VIcon:ft["a"],VList:Rt["a"],VListItem:xt["a"],VListItemAction:Nt["a"],VListItemContent:Et["a"],VListItemTitle:Et["c"],VNavigationDrawer:wt["a"]});var Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-main",[n("v-container",{staticClass:"fill-height pa-0",attrs:{fluid:""}},[t.currentRoom?n("div",{staticClass:"wrapper"},[n("div",{ref:"chat",staticClass:"chat"},[n("v-row",{attrs:{"no-gutters":""}},t._l(t.currentRoom.history,(function(t,e){return n("v-col",{key:e,attrs:{cols:"12"}},[n("message",{attrs:{msg:t}})],1)})),1)],1),n("div",{staticClass:"input-send"},[n("v-row",{staticClass:"pa-3 pt-5",attrs:{dense:"",align:"start"}},[n("v-col",{attrs:{cols:""}},[n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{clearable:"",autocomplete:"off",type:"text",counter:t.settings.maxMessageLength,rules:[t.rules.required,t.rules.onlyString,t.rules.maxLength],placeholder:"Ваше сообщение",outlined:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleClickSend(e))}},model:{value:t.msgText,callback:function(e){t.msgText="string"===typeof e?e.trim():e},expression:"msgText"}})],1)],1),n("v-col",{attrs:{cols:"auto"}},[n("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:t.handleClickSend}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-send")])],1)],1)],1)],1)]):n("p",{staticClass:"hint text-center body-1 grey--text text--lighten-1"},[t._v("Нет выбранного чата...")])])],1)},It=[],Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"ma-2 ",class:{"align-self-end":t.isSudo},attrs:{width:"70%",color:t.isSudo?"grey lighten-1 ml-auto":"grey lighten-3",dark:t.isSudo}},[n("v-card-title",{staticClass:"body-2 pa-2"},[t.isSudo?t._e():n("v-icon",{staticClass:"mr-2"},[t._v("mdi-account")]),t._v(" "+t._s(t.msg.sender)+" ")],1),n("v-card-text",{staticClass:"body-2 pa-2"},[t._v(t._s(t.msg.text))])],1)},Ut=[],Dt={name:"Message",data:function(){return{}},props:{msg:{type:Object,required:!0}},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("auth",["userName"])),{},{isSudo:function(){return this.msg.sender===this.userName}})},Gt=Dt,Bt=Object(h["a"])(Gt,Pt,Ut,!1,null,"6d2a2a18",null),$t=Bt.exports;O()(Bt,{VCard:Y["a"],VCardText:tt["b"],VCardTitle:tt["c"],VIcon:ft["a"]});var Ht={name:"MainChat",data:function(){return{msgText:"",valid:!1,rules:{}}},components:{Message:$t},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("rooms",["currentRoom"])),Object(l["d"])("settings",["settings"])),watch:{"currentRoom.history":function(){this.scrollToBottom()}},created:function(){this.initRules()},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("socket",["sendSocket"])),{},{scrollToBottom:function(){var t=this;this.$nextTick((function(){var e=t.$refs.chat;e.scrollTop=e.scrollHeight}))},handleClickSend:function(){this.$refs.form.validate(),this.valid&&(this.sendSocket({room:this.currentRoom.name,text:this.msgText}),this.$refs.form.reset())},initRules:function(){this.rules.required=B,this.rules.onlyString=$,this.rules.maxLength=H(this.settings.maxMessageLength)}})},Wt=Ht,Ft=(n("7103"),n("62ad")),qt=n("a523"),Jt=n("f6c4"),Yt=n("0fd9"),Kt=Object(h["a"])(Wt,Mt,It,!1,null,"951fe5e2",null),zt=Kt.exports;O()(Kt,{VBtn:_["a"],VCol:Ft["a"],VContainer:qt["a"],VForm:et["a"],VIcon:ft["a"],VMain:Jt["a"],VRow:Yt["a"],VTextField:rt["a"]});var Qt={name:"Main",data:function(){return{}},components:{MainModalCreatRoom:ct,MainHeader:ht,MainDrawer:kt,MainSidebar:Lt,MainChat:zt},computed:Object(u["a"])({},Object(l["d"])("auth",["userName"])),created:function(){this.init()},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])("modals",["TOGGLE_SHOW_CREATE_ROOM"])),Object(l["b"])("socket",["connectSocket","sendSocket"])),{},{init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.userName){e.next=5;break}return e.next=3,t.connectSocket(t.userName);case 3:e.next=6;break;case 5:t.$router.push({name:"login"});case 6:case"end":return e.stop()}}),e)})))()}})},Xt=Qt,Zt=Object(h["a"])(Xt,P,U,!1,null,"099ff172",null),te=Zt.exports;O()(Zt,{VApp:N["a"]});var ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-main",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",md:"4",sm:"8"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Ваше имя")]),n("v-spacer")],1),n("v-card-text",[n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{rules:[t.rules.required,t.rules.onlyString,t.rules.maxLength],counter:t.settings.maxUserNameLength,clearable:"",autocomplete:"off","prepend-icon":"mdi-account",type:"text"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handlerClickLogin(e))}},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{block:"",color:"secondary"},on:{click:t.handlerClickLogin}},[t._v("Войти")])],1)],1)],1)],1)],1)],1)},ne=[],re={name:"Login",data:function(){return{name:"",valid:!1,rules:{}}},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("auth",["userName"])),Object(l["d"])("settings",["settings"])),created:function(){this.userName&&this.$router.push({name:"main"}),this.initRules()},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("auth",["login"])),{},{handlerClickLogin:function(){this.$refs.form.validate(),this.valid&&(this.login(this.name),this.$router.push({name:"main"}))},initRules:function(){this.rules.required=B,this.rules.onlyString=$,this.rules.maxLength=H(this.settings.maxUserNameLength)}})},ae=re,oe=Object(h["a"])(ae,ee,ne,!1,null,"084bda47",null),ie=oe.exports;O()(oe,{VBtn:_["a"],VCard:Y["a"],VCardActions:tt["a"],VCardText:tt["b"],VCol:Ft["a"],VContainer:qt["a"],VForm:et["a"],VMain:Jt["a"],VRow:Yt["a"],VSpacer:nt["a"],VTextField:rt["a"],VToolbar:at["a"],VToolbarTitle:ot["a"]}),o["a"].use(I["a"]);var ce=[{path:"/",name:"main",component:te,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:ie},{path:"*",redirect:{name:"main"}}],se=new I["a"]({mode:"history",base:"/",routes:ce}),ue=se,le=(n("99af"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("159b"),n("2909")),me=n("bc3a"),de=n.n(me);console.log("https://nane.tada.team");var fe=de.a.create({baseURL:"https://nane.tada.team"}),pe=fe,he="/api/";function ve(){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pe.get("".concat(he,"settings"));case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),Oe.apply(this,arguments)}function _e(){return ge.apply(this,arguments)}function ge(){return ge=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pe.get("".concat(he,"rooms"));case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),ge.apply(this,arguments)}function be(t){return Re.apply(this,arguments)}function Re(){return Re=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pe.get("".concat(he,"rooms/").concat(e,"/history"));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),Re.apply(this,arguments)}var xe="/ws";function Ee(t){return Se.apply(this,arguments)}function Se(){return Se=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat("wss://nane.tada.team").concat(xe,"?username=").concat(e),t.next=3,new WebSocket(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),Se.apply(this,arguments)}var we,Ce,ke={main:r,ws:a},ye={defaultBottomSheet:"Точно хотите выйти ?",errorGetSettings:"Не удается загрузить настройки",errorGetHistory:"Не удается загрузить историю",errorGetRooms:"Не удается загрузить комнаты",errorSetRooms:"Не удается создать комнату",createAutoRoom:"Появилась новая комната",createRoom:"Добавленна новая комната",errorGetMessages:"Не удается загрузить сообщения",errorProcessMessages:"Не удается обработать новое сообщения",errorGetInitSocket:"Не удается подключиться по веб сокету",errorSendSocket:"Не удается отправить сообщение по веб сокету",initSocket:"Соединение по веб сокету установленно"},je=n("d4ec"),Ae=n("bee2"),Te=function(){function t(e){Object(je["a"])(this,t),this.room=e.room,this.created=e.created,this.sender=e.sender.username,this.text=e.text}return Object(Ae["a"])(t,[{key:"toJSON",get:function(){return JSON.stringify({room:this.room,text:this.text})}}]),t}(),Ne=function(){function t(e){Object(je["a"])(this,t),this.name=e.name,this.isActive=!1,this.isCurrent=!1,this.history=[],this.lastMessage=e.last_message?new Te(e.last_message):null}return Object(Ae["a"])(t,[{key:"addMessagesInHistory",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this.history).push.apply(t,n),this.lastMessage=n.pop()}}]),t}(),Ve={namespaced:!0,state:{rooms:[],currentRoom:null,activeRooms:[]},mutations:{SET_ROOMS:function(t,e){t.rooms=e},ADD_ROOM:function(t,e){t.rooms.push(e)},RESET_ROOMS:function(t){t.currentRoom&&(t.currentRoom.isCurrent=!1),t.currentRoom=null,t.activeRooms.forEach((function(t){return t.isActive=!1})),t.activeRooms=[]},SET_CURRENT_ROOM:function(t,e){t.currentRoom&&(t.currentRoom.isCurrent=!1),e.isCurrent=!0,t.currentRoom=e},ADD_ACTIVE_ROOM:function(t,e){e.isActive=!0,t.activeRooms.push(e)},ADD_NEW_MESSAGE:function(t,e){var n=t.activeRooms.filter((function(t){return t.name===e.room}));n.forEach((function(t){t.addMessagesInHistory(e)}))}},actions:{getRooms:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,ke.main.getRooms();case 4:r=e.sent,a=r.result,o=a.map((function(t){return new Ne(t)})),console.info("rooms from api",o),n("SET_ROOMS",o),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),We.dispatch("notifications/showNotification",{text:ye.errorGetRooms,type:"error"}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},createRoom:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit;try{a=new Ne({name:e}),console.info("new local room",a),r("ADD_ROOM",a),r("ADD_ACTIVE_ROOM",a),r("SET_CURRENT_ROOM",a)}catch(o){We.dispatch("notifications/showNotification",{text:ye.errorSetRooms,type:"error"}),console.error(o)}case 2:case"end":return n.stop()}}),n)})))()},createAutoRoom:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit;try{a=new Ne({name:e.room}),a.lastMessage=e,console.info("new auto room from api",a),r("ADD_ROOM",a),We.dispatch("notifications/showNotification",{text:"".concat(ye.createAutoRoom," ").concat(a.name)})}catch(o){We.dispatch("notifications/showNotification",{text:ye.errorSetRooms,type:"error"}),console.error(o)}case 2:case"end":return n.stop()}}),n)})))()},processNewMessage:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,a=t.dispatch,o=t.state;try{i=new Te(JSON.parse(e)),console.info("new messages ",i),c=o.rooms.find((function(t){return t.name===i.room})),c?r("ADD_NEW_MESSAGE",i):a("createAutoRoom",i)}catch(s){We.dispatch("notifications/showNotification",{text:ye.errorProcessMessages,type:"error"}),console.error(s)}case 2:case"end":return n.stop()}}),n)})))()},getHistory:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,n.prev=1,n.next=4,ke.main.getHistory(e);case 4:return r=n.sent,a=r.result,o=a.map((function(t){return new Te(t)})),console.info("message for ".concat(e),o),n.abrupt("return",o);case 11:n.prev=11,n.t0=n["catch"](1),We.dispatch("notifications/showNotification",{text:ye.errorGetHistory,type:"error"}),console.error(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},initActiveRoom:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.dispatch,n.prev=1,!e.isActive){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,a("getHistory",e.name);case 6:o=n.sent,e.addMessagesInHistory.apply(e,Object(le["a"])(o)),r("ADD_ACTIVE_ROOM",e),r("SET_CURRENT_ROOM",e),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](1),We.dispatch("notifications/showNotification",{text:ye.errorGetMessages,type:"error"}),console.error(n.t0);case 16:case"end":return n.stop()}}),n,null,[[1,12]])})))()}}},Le=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(je["a"])(this,t),this.maxMessageLength=e.max_message_length||10500,this.maxRoomTitleLength=e.max_room_title_length||50,this.maxUserNameLength=e.max_username_length||50,this.minLength=e.min_length||5,this.uptime=e.uptime},Me={namespaced:!0,state:{settings:null},mutations:{SET_SETTINGS:function(t,e){t.settings=e}},actions:{getSettings:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,ke.main.getConfig();case 4:a=e.sent,o=a.result,r=new Le(o),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](1),r=new Le,We.dispatch("notifications/showNotification",{text:ye.errorGetSettings,type:"error"}),console.error(e.t0);case 14:return e.prev=14,console.info("settings from api",r),n("SET_SETTINGS",r),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[1,9,14,18]])})))()}}},Ie=(n("c740"),n("a434"),n("d3b7"),4e3),Pe="secondary",Ue={namespaced:!0,state:{count:0,notifications:[],userAction:null},mutations:{INCREMENT_COUNT:function(t){t.count++},ADD_NOTIFICATION:function(t,e){t.notifications.unshift(e)},DELETE_NOTIFICATION:function(t,e){var n=t.notifications.findIndex((function(t){return t.id===e.id}));-1!==n&&t.notifications.splice(n,1)},SET_USER_ACTION:function(t,e){t.userAction=e}},actions:{showNotification:function(t,e){var n=t.commit,r=t.state,a=e.type,o=e.text,i=void 0===o?"":o,c=Pe;"error"===a&&(c="error");var s={text:i,color:c,id:r.count};n("ADD_NOTIFICATION",s),setTimeout((function(){n("DELETE_NOTIFICATION",s)}),Ie),n("INCREMENT_COUNT")},confirmUserAction:function(t){var e=t.commit,n=(t.state,arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.defaultBottomSheet),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:De.DELETE;return new Promise((function(t){we=t,e("SET_USER_ACTION",{type:r,text:n})}))},resolveConfirmUserAction:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,t.state,r("SET_USER_ACTION",null),we(e);case 3:case"end":return n.stop()}}),n)})))()}}},De={DELETE:"delete"},Ge={namespaced:!0,state:{isShowCreateRoom:!1,isShowDrawer:!1},mutations:{TOGGLE_SHOW_CREATE_ROOM:function(t,e){t.isShowCreateRoom=e},TOGGLE_SHOW_DRAWER:function(t,e){t.isShowDrawer=e}}},Be="userName",$e={namespaced:!0,state:{userName:null},mutations:{LOGIN:function(t,e){t.userName=e},LOGOUT:function(t){t.userName=null}},actions:{login:function(t,e){var n=t.commit;return localStorage.setItem(Be,e),n("LOGIN",e),e},logout:function(t){var e=t.commit;localStorage.removeItem(Be),e("LOGOUT")},checkAuth:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,e.next=3,localStorage.getItem(Be);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()}}},He={namespaced:!0,state:{isConnect:!1},mutations:{SET_IS_CONNECT:function(t,e){t.isConnect=e}},actions:{connectSocket:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=t.dispatch,n.prev=1,n.next=4,ke.ws.getSocket(e);case 4:return o=n.sent,n.next=7,new Promise((function(t){o.onopen=function(){o.onmessage=function(t){We.dispatch("rooms/processNewMessage",t.data)},Ce=o,We.dispatch("notifications/showNotification",{text:ye.initSocket}),t()}}));case 7:r("SET_IS_CONNECT",!0),n.next=15;break;case 10:n.prev=10,n.t0=n["catch"](1),a("disconnectSocket"),We.dispatch("notifications/showNotification",{text:ye.errorGetInitSocket,type:"error"}),console.error(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,10]])})))()},sendSocket:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,t.state,n.prev=1,e=JSON.stringify(e),n.next=5,Ce.send(e);case 5:n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),We.dispatch("notifications/showNotification",{text:ye.errorSendSocket,type:"error"}),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,7]])})))()},disconnectSocket:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,Ce.close();case 4:n("SET_IS_CONNECT",!1),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}};o["a"].use(l["a"]);var We=new l["a"].Store({modules:{rooms:Ve,settings:Me,notifications:Ue,modals:Ge,auth:$e,socket:He}}),Fe=n("f309"),qe=n("0879"),Je=n("fcf4");o["a"].use(Fe["a"]);var Ye=new Fe["a"]({theme:{themes:{light:{primary:Object({NODE_ENV:"production",VUE_APP_BASE_URL:"sega_mega_chat",VUE_APP_BASE_URL_SUB:"/sega_mega_chat",VUE_APP_API_BASE_URL:"https://nane.tada.team",VUE_APP_API_BASE_UR2L:"http://localhost:8021",VUE_APP_SOCKET_BASE_URL:"wss://nane.tada.team",VUE_APP_SOCKET_BASE_URL2:"ws://localhost:8021",VUE_APP_PRIMARY_COLOR2:"#009688",VUE_APP_SECONDARY_COLOR2:"green",BASE_URL:"/"}).VUE_APP_PRIMARY_COLOR||Je["a"].teal,secondary:Object({NODE_ENV:"production",VUE_APP_BASE_URL:"sega_mega_chat",VUE_APP_BASE_URL_SUB:"/sega_mega_chat",VUE_APP_API_BASE_URL:"https://nane.tada.team",VUE_APP_API_BASE_UR2L:"http://localhost:8021",VUE_APP_SOCKET_BASE_URL:"wss://nane.tada.team",VUE_APP_SOCKET_BASE_URL2:"ws://localhost:8021",VUE_APP_PRIMARY_COLOR2:"#009688",VUE_APP_SECONDARY_COLOR2:"green",BASE_URL:"/"}).VUE_APP_SECONDARY_COLOR||Je["a"].teal.lighten2,accent:Je["a"].indigo.base}}},lang:{locales:{ru:qe["a"]},current:"ru"}});o["a"].config.productionTip=!1,new o["a"]({router:ue,store:We,vuetify:Ye,render:function(t){return t(M)}}).$mount("#app")},7103:function(t,e,n){"use strict";var r=n("c33e"),a=n.n(r);a.a},bc04:function(t,e,n){},c33e:function(t,e,n){}});
//# sourceMappingURL=app.c9ed4fba.js.map